import{C as f}from"./Card-BkRgTjE4.js";import{r as l,a as y}from"./http-BdPdqHpv.js";import{d as h,r as u,y as w,c as i,W as C,F as g,X as v,o as n,z as x,_ as b}from"./index-DOaJHVH_.js";import"./base-BfNkUZ64.js";const k={class:"wrap"},A={class:"parentbox"},B=h({__name:"Many",setup(I){const s=u([]),o=u([]);return w(async()=>{const c=(await l.get("/blog")).data.data.map(t=>t.contentId),e=async t=>{const r=(await y.get("https://chat.nbplus507.dpdns.org/api/comment?type=count",{params:{url:`/details?id=${t}`}})).data.data[0];return r===0?null:{contentId:t,commentCount:r}},d=async()=>{let t=await Promise.all(c.map(a=>e(a)));return t=t.filter(a=>a!==null),t.sort((a,r)=>r.commentCount-a.commentCount),t};o.value=await d();const p=async t=>{try{return(await l.get(`/blog/${t}`)).data.data}catch(a){return console.error(`获取文章详情失败，contentId: ${t}`,a),{contentId:t,title:null,content:null}}},_=async()=>{try{return await Promise.all(o.value.map(async t=>await p(t.contentId)))}catch(t){return console.error("获取所有文章详情失败",t),[]}};s.value=await _()}),(m,c)=>(n(),i("div",k,[C("div",A,[(n(!0),i(g,null,v(s.value,e=>(n(),x(f,{key:e.contentId,card:e},null,8,["card"]))),128))])]))}}),P=b(B,[["__scopeId","data-v-9c2c8a14"]]);export{P as default};
